<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>भारतीय जनता पार्टी मंदसौर</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Custom styles for BJP branding */
    .bjp-orange { background-color: #FF6200; }
    .bjp-green { background-color: #008000; }
    .bjp-orange:hover { background-color: #e55b00; }
    .bjp-green:hover { background-color: #006400; }
    .modal { display: none; }
    .modal.active { display: flex; }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <!-- Header -->
  <header class="bg-gradient-to-r from-bjp-orange to-bjp-green text-white py-6">
    <div class="container mx-auto text-center">
      <h1 class="text-3xl md:text-4xl font-bold">भारतीय जनता पार्टी मंदसौर</h1>
      <p class="mt-2 text-lg">कार्यक्रम में आपकी उपस्थिति के फोटो यहाँ से प्राप्त करें</p>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container mx-auto py-8 px-4">
    <!-- Photo Upload/Camera Section -->
    <section class="bg-white rounded-lg shadow-lg p-6 mb-8">
      <h2 class="text-2xl font-semibold mb-4">फोटो चुनें या कैमरा से कैप्चर करें</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- File Input -->
        <div class="flex flex-col items-center">
          <input type="file" accept="image/*" id="photoInput" class="border p-2 rounded w-full max-w-xs">
          <p class="text-sm text-gray-500 mt-2">* मोबाइल पर सेल्फी खींचकर खोजें</p>
        </div>
        <!-- Camera Controls -->
        <div class="flex flex-col items-center space-y-4">
          <video id="cameraFeed" class="w-full max-w-xs rounded-lg shadow" autoplay></video>
          <div class="flex space-x-4">
            <button id="startCamera" class="bjp-orange text-white px-4 py-2 rounded-lg hover:shadow-lg transition">कैमरा शुरू करें</button>
            <button id="capturePhoto" class="bjp-green text-white px-4 py-2 rounded-lg hover:shadow-lg transition">कैप्चर करें</button>
            <button id="stopCamera" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">रोकें</button>
          </div>
        </div>
      </div>
      <!-- Selected Photo -->
      <div class="mt-6 text-center">
        <h3 class="text-lg font-semibold">चयनित फोटो</h3>
        <p id="selectedPhoto" class="text-gray-600">कोई फोटो चयनित नहीं</p>
        <button id="previewPhoto" class="text-blue-500 underline mt-2" disabled>फोटो प्रीव्यू करें</button>
      </div>
      <!-- Search/Clear Buttons -->
      <div class="mt-6 flex justify-center space-x-4">
        <button id="searchBtn" class="bjp-orange text-white px-6 py-2 rounded-lg hover:shadow-lg transition">खोजें</button>
        <button id="clearBtn" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition">हटाएँ</button>
      </div>
      <!-- API Placeholder -->
      <div class="mt-4 text-center">
        <p>API: <a href="#" class="text-blue-500 underline">API लिंक</a></p>
      </div>
    </section>

    <!-- Results Section -->
    <section class="bg-white rounded-lg shadow-lg p-6">
      <h2 class="text-2xl font-semibold mb-4">परिणाम</h2>
      <!-- Page Size Selector -->
      <div class="flex items-center mb-4">
        <label for="pageSize" class="mr-2">पेज साइज़:</label>
        <select id="pageSize" class="border rounded p-2">
          <option value="12">12</option>
          <option value="24">24</option>
          <option value="48">48</option>
          <option value="96">96</option>
        </select>
        <span class="ml-4 text-gray-600">0 परिणाम</span>
      </div>
      <!-- Pagination -->
      <div class="flex justify-center space-x-4 mb-4">
        <button class="bg-gray-300 px-4 py-2 rounded hover:bg-gray-400 transition">◄ पिछला</button>
        <span>1 / 1</span>
        <button class="bg-gray-300 px-4 py-2 rounded hover:bg-gray-400 transition">अगला ►</button>
      </div>
      <!-- No Results Message -->
      <p class="text-center text-gray-600">अभी तक कोई खोज नहीं</p>
      <!-- Selection Controls -->
      <div class="mt-6 flex justify-center space-x-4">
        <button class="bjp-orange text-white px-4 py-2 rounded-lg hover:shadow-lg transition">पेज में सभी चुनें</button>
        <button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">चयन हटाएँ</button>
        <button class="bjp-green text-white px-4 py-2 rounded-lg hover:shadow-lg transition">चयनित डाउनलोड करें</button>
        <button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">चयन साफ करें</button>
      </div>
    </section>
  </main>

  <!-- Modal for Photo Preview -->
  <div id="photoModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-lg p-6 max-w-lg w-full">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold">फोटो प्रीव्यू</h3>
        <button id="closeModal" class="text-2xl hover:text-red-500">&times;</button>
      </div>
      <div class="flex justify-between items-center">
        <button id="prevPhoto" class="text-2xl hover:text-blue-500">&lsaquo;</button>
        <img id="modalImage" src="" alt="Preview" class="w-full h-64 object-cover rounded">
        <button id="nextPhoto" class="text-2xl hover:text-blue-500">&rsaquo;</button>
      </div>
    </div>
  </div>

  <!-- JavaScript for Functionality -->
  <script>
    // Camera Functionality
    const video = document.getElementById('cameraFeed');
    const startCameraBtn = document.getElementById('startCamera');
    const capturePhotoBtn = document.getElementById('capturePhoto');
    const stopCameraBtn = document.getElementById('stopCamera');
    const previewPhotoBtn = document.getElementById('previewPhoto');
    const modal = document.getElementById('photoModal');
    const closeModalBtn = document.getElementById('closeModal');
    const modalImage = document.getElementById('modalImage');
    let stream = null;
    let capturedImage = null;

    startCameraBtn.addEventListener('click', async () => {
      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
      } catch (err) {
        console.error('कैमरा शुरू करने में त्रुटि:', err);
        alert('कैमरा शुरू करने में त्रुटि। कृपया अनुमति दें।');
      }
    });

    capturePhotoBtn.addEventListener('click', () => {
      const canvas = document.createElement('canvas');
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);
      capturedImage = canvas.toDataURL('image/png');
      document.getElementById('selectedPhoto').textContent = 'फोटो कैप्चर किया गया';
      previewPhotoBtn.disabled = false;
      previewPhotoBtn.classList.add('text-blue-500', 'underline');
    });

    stopCameraBtn.addEventListener('click', () => {
      if (stream) {
        stream.getTracks().forEach(track => track.stop());
        video.srcObject = null;
      }
    });

    // Modal Functionality
    previewPhotoBtn.addEventListener('click', () => {
      if (capturedImage) {
        modalImage.src = capturedImage;
        modal.classList.add('active');
      }
    });

    closeModalBtn.addEventListener('click', () => {
      modal.classList.remove('active');
      modalImage.src = ''; // Clear image to avoid memory issues
    });

    // Placeholder for Search and Clear
    document.getElementById('searchBtn').addEventListener('click', () => {
      alert('खोज शुरू हो रही है...');
      // API call to AWS backend goes here
    });

    document.getElementById('clearBtn').addEventListener('click', () => {
      document.getElementById('selectedPhoto').textContent = 'कोई फोटो चयनित नहीं';
      previewPhotoBtn.disabled = true;
      previewPhotoBtn.classList.remove('text-blue-500', 'underline');
      capturedImage = null;
    });
  </script>
</body>
</html>
